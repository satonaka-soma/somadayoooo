<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>スタンプカード React版</title>

    <!-- PWA（任意・入れてOK） -->
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="icon" href="icon-192.png" />
    <link rel="apple-touch-icon" href="icon-512.png" />
    <meta name="theme-color" content="#10b981" />

    <style>
      :root { color-scheme: light; }
      html, body { height: 100%; }
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, "Noto Sans JP", sans-serif;
        background: #f9fafb;
      }
      #root {
        min-height: 100vh;
        display: grid;
        place-items: center;
      }
      .loading {
        opacity: 0.7;
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <noscript>JavaScript を有効にしてください。</noscript>
    <div id="root"><span class="loading">スタンプカード React版 読み込み中…</span></div>

    <!-- React本体（CDN） -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- あなたのビルド済みバンドルを ESM として読み込んで明示的に描画 -->
    <script type="module">
      // ※ キャッシュ回避のため ?v=2 などのクエリをつけています。更新時は数字を変えてください。
      import App from "./bundle.js?v=2";

      const mount = () => {
        const rootEl = document.getElementById("root");
        // すでに何か描画されていたら消す
        rootEl.innerHTML = "";
        const root = ReactDOM.createRoot(rootEl);
        root.render(React.createElement(App));
      };

      // 安全に実行
      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", mount);
      } else {
        mount();
      }
    </script>
  </body>
</html>
